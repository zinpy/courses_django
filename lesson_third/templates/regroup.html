<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>REGROUP</title>

</head>
<body>


<h2>REGROUP</h2>
{% regroup people by gender as gender_list %}

<ul>
  {% for gender in gender_list %}
    <li>{{ gender.grouper }}
      <ul>
        {% for item in gender.list %}
          <li>{{ item.first_name }} {{ item.last_name }}</li>
        {% endfor %}
      </ul>
    </li>
  {% endfor %}
</ul>


<h2>REGROUP 2</h2>
{% regroup people by gender as gender_list %}

<ul>
  {% for gender, line in gender_list %}
    <li>{{ gender }}
      <ul>
        {% for item in line %}
          <li>{{ item.first_name }} {{ item.last_name }}</li>
        {% endfor %}
      </ul>
    </li>
  {% endfor %}
</ul>


<h2>REGROUP для неупорядоченого списка</h2>
{% regroup people_for_test by gender as gender_list %}

<ul>
  {% for gender in gender_list %}
    <li>{{ gender.grouper }}
      <ul>
        {% for item in gender.list %}
          <li>{{ item.first_name }} {{ item.last_name }}</li>
        {% endfor %}
      </ul>
    </li>
  {% endfor %}
</ul>
<h2>REGROUP c фильтром dictsort</h2>
{% regroup people_for_test|dictsort:"gender" by gender as gender_list %}
<ul>
  {% for gender in gender_list %}
    <li>{{ gender.grouper }}
      <ul>
        {% for item in gender.list %}
          <li>{{ item.first_name }} {{ item.last_name }}</li>
        {% endfor %}
      </ul>
    </li>
  {% endfor %}
</ul>
</body>
</html>